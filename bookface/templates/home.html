<!-- bookface/templates/home.html -->
{% extends 'base.html' %} {% block content %}
{%load static%}
<style>
  /* Add custom CSS to make the column scrollable */
  .scrollable-column {
    max-height: 80vh; /* Set a maximum height for the scrollable area */
    overflow-y: auto; /* Enable vertical scrolling */
  }

  /* Add custom CSS to style the profile picture */
  .profile-picture {
    width: 50px; /* Adjust the width as needed */
    height: 50px; /* Adjust the height as needed */
    border-radius: 50%;
    margin-right: 10px;
    object-fit: cover;
  }
  .side-profile-picture {
    width: 30px; /* Adjust the width as needed */
    height: 30px; /* Adjust the height as needed */
    border-radius: 50%;
    margin-right: 10px;
    object-fit: cover;
  }
  .advertisement {
    width: 150px; /* Adjust the width as needed */
    height: 150px; /* Adjust the height as needed */
    margin-left: 10px;
    object-fit: cover;
    border-radius: 10%;
  }

  /* Add custom CSS to prevent stretching of images */
</style>

<div class="row" style="background-color: #f0f2f5">
  <div class="col-md-3">   
    <ul class="list-group list-group-flush " >
      <a href="{% url 'view_profile' username=user.username %}" ">
    <li class="list-group-item d-flex align-items-center pb-3" style="background-color: #f0f2f5">
      {% if user.userprofile.profile_picture %}
        <img
          src="{{ user.userprofile.profile_picture.url }}"
          alt="Profile Picture"
          class="side-profile-picture"
        />
      {% else %}
        <img
          src="profile_pics/default_profile.jpg"
          alt="Profile Picture"
          class="profile-picture"
        />
      {% endif %}
      <div class="ps-1">
      <a href="{% url 'view_profile' username=user.username %}" style="text-decoration: none; color: rgb(26, 25, 25);">
        <h6 class="card-title">
          {{ user.username }}
        </h6>
        </a></div>
      </a>

    </li>
    <li class="list-group-item my-2 pb-3" style="background-color: #f0f2f5">
     <i class="fa fa-user-group pe-3 ms-1 text-primary" ></i> Friends
    </li>
    <li class="list-group-item my-2 pb-3" style="background-color: #f0f2f5">
      <i class="fa fa-list-check pe-3 ms-1 text-primary" ></i> Todolist
     </li>
     <li class="list-group-item my-2 pb-3" style="background-color: #f0f2f5">
      <i class="fa fa-message pe-3 ms-1 text-primary" ></i> Messages
     </li>
  </ul>
</div>
  <div class="col-md-6 justify-content-md-start scrollable-column">
    <div class="mb-5">
      <img
      src="{% static 'bookface/images/bookface.png' %}"  
      alt="Image 1"
      height="50"
      style="margin-top: -15px; margin-bottom: -15px;"
  />
    </div>
    {% for post in posts %}
    <div class="card mb-4" style="min-height: 150px;">
      <div class="card-header d-flex align-items-center bg-dark-subtle">
        {% if post.author.userprofile.profile_picture %}
        <a href="{% url 'view_profile' username=post.author.username %}" ">
          <img
            src="{{ post.author.userprofile.profile_picture.url }}"
            alt="Profile Picture"
            class="profile-picture"
          />
        </a>
        {% else %}
        <a href="{% url 'view_profile' username=post.author.username %}">
          <img
            src="profile_pics/default_profile.jpg"
            alt="Profile Picture"
            class="profile-picture"
          />
        </a>
        {% endif %}
        <div>
          <a href="{% url 'view_profile' username=post.author.username %}" style="text-decoration: none; color: rgb(26, 25, 25);">
            <h6 class="card-title">
              <b>{{ post.author.username }}</b>
            </h6>
          </a>
          <h6 class="card-subtitle mb-2 text-body-secondary">
            <small>{{ post.created_at}}</small>
          </h6>
        </div>
      </div>
      <div class="card-body">
        <p class="card-text">{{ post.content }}</p>
        {% if post.image %}
        <img
          src="{{ post.image.url }}"
          alt="Post Image"
          class="img-fluid img-fit"
        />
        {% endif %}
      </div>
      <div class="card-footer">
        <a href="#" class="card-link">Like</a>
        <a href="#" class="card-link">Comment</a>
      </div>
    </div>
    {% endfor %}
  </div>
  <div class="col-md-3">
    <div class="mb-3">
    <b class="text-light-emphasis">Advertisement</b>
    </div>
    <div class="d-flex align-items-center">
    <img
    src="{% static 'bookface/images/shawarma_Rice.jpg' %}"  
    alt="AD Shawarma Rice yum yum"
    class="advertisement"
  />
  <p class="ms-2 d-block">Shawarma Rice </p>
  
  <!-- <a href="shopee.ph"><small>shopee.ph</small></a> -->
</div>
<div class="d-flex align-items-center mt-2">
  <img
  src="{% static 'bookface/images/mixnmatch.jpeg' %}"  
  alt="AD mixnmatch"
  class="advertisement"
/>
<p class="ms-2 d-block">Mix and Match </p>

<!-- <a href="shopee.ph"><small>shopee.ph</small></a> -->
</div>
  </div>
</div>

<div class="dropdown">
  <button type="button" class="btn text-black bg-secondary-subtle rounded-5 me-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-comment"></i></button>
  <ul class="dropdown-menu dropdown-menu-end">
      {% for chat in chat_list %}
      <li>
        {% if chat.sender.username %}
            <a class="dropdown-item" href="{% url 'chat_room' username=chat.sender.username %}">{{ chat.sender.username }}</a>
        {% else %}
            <p>Invalid username</p>
        {% endif %}
    </li>
    
      {% endfor %}
  </ul>
</div>
{% endblock %}
