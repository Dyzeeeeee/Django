{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Bookface</title>
    <!-- Add Bootstrap CSS link -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
    .navbar-elevated {
        box-shadow: 0 4px 2px -2px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  
  <body style="background-color: #F0F2F5;">
    <nav class="navbar navbar-expand-lg navbar-light navbar-elevated sticky-md-top bg-white">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'home' %}"
          ><img
            src="{% static 'bookface/images/bookface_logo.svg' %}"  
            alt="Image 1"
            height="45"
            style="margin-top: -15px; margin-bottom: -15px;"
        /></a>
        <div class="col-md-3">
          <input
            class="form-control rounded-pill"
            type="search"
            placeholder="Search Bookface"
            id="example-search-input"
          />
        </div>
        </button>
        <div class="collapse navbar-collapse col-md-6 justify-content-md-around" id="navbarNav">
          <ul class="nav nav-pills nav-fill">
            {% if user.is_authenticated %}
            <li class="nav-item">
              <!-- <a class="nav-link active" aria-current="page" href="{% url 'home' %}"><i class="fas fa-home"></i></a> -->
            </li>
            {% endif %}
          </ul>
        </div>  
        <div class="col-md-2 d-flex justify-content-md-end">
            {% if user.is_authenticated %}
            <a class="nav-link" href="{% url 'create_post' %}"> <button type="button" class="btn text-black bg-secondary-subtle rounded-5 me-1" style="color: black;"><i class="fas fa-plus"></i></button> </a>
            

            <div class="dropdown">
                <button type="button" class="btn text-black bg-secondary-subtle rounded-5 me-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-comment"></i></button>
                <ul class="dropdown-menu dropdown-menu-end">
                    {% for chat in chat_list %}<li>
                        {% if chat.sender.username %}
                        <a class="dropdown-item" href="{% url 'chat_room' username=chat.sender.username %}">{{ chat.sender.username }}</a>
                      {% elif chat.receiver.username %}
                        <a class="dropdown-item" href="{% url 'chat_room' username=chat.receiver.username %}">{{ chat.receiver.username }}</a>
                      {% else %}
                        <p>Invalid username</p>
                      {% endif %}
                    </li>
                    
                    {% endfor %}    
                </ul>
            </div>

                  <div class="dropdown">
            <button type="button" class="btn text-black bg-secondary-subtle rounded-5 me-1"  data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-bell"></i></button> 
                    <ul class="dropdown-menu dropdown-menu-end">
                      <li><button class="dropdown-item" type="button">Notifs</button></li>
                      <li><button class="dropdown-item" type="button">Another action</button></li>
                      <li><button class="dropdown-item" type="button">Something else here</button></li>
                    </ul>
                  </div>

                  <div class="dropdown">
            <button type="button" class="btn text-black bg-secondary-subtle rounded-5 me-2" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user-circle"></i></button>

                            <ul class="dropdown-menu dropdown-menu-end">
<a class="dropdown-item" href="{% url 'view_profile' username=user.username %}">View Profile</a>

                                <a class="dropdown-item" href="#">Settings</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                            </ul>
                          </div>
           
                {% else %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'login' %}">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'register' %}">Register</a>
            </li>
            {% endif %}
        </div>

      </div>
    </nav>

    <div class="mt-3 bg-light">{% block content %} {% endblock %}</div>

    <!-- Add Bootstrap JS and Popper.js (optional, for Bootstrap components that require it) -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
